{% extends "index.html" %} 
{% block htitle %}<title>Registrar Farmacia</title>{% endblock %} 
{% block contenido %} 




  <div class='container'>
    <div class='panel panel-primary dialog-panel'>
      <div class='panel-heading'>
        <h5>Agregar farmacia</h5>
      </div>
      <div class='panel-body'>
        <form id='miForm' method='post' enctype='multipart/form-data' action='/aplicacion/farmacia/' autocomplete="off" class='form-horizontal'>{% csrf_token %}
        
          <div class='form-group'>
            
            <label class='control-label col-md-2 col-md-offset-2' for='cuit' value=''>Cuit*</label>
            
            <div class='col-md-4'>
              <input class='form-control' id='cuit' name='cuit' type='text' autocomplete="off"></input>
            </div>
        </div>
        
         <div class='form-group'>
            
            <label class='control-label col-md-2 col-md-offset-2' for='cuit'>Contraseña*</label>
            
            

            <div class='col-md-4'>
              <input class='form-control' id='password' name='password' type='text' autocomplete="off"></input>
            </div>
              
      
          </div>

          
        
         <div class='form-group'>
          <label class='control-label col-md-2 col-md-offset-2' for='razon_social'>Razon social*</label>
          <div class='col-md-4'>
            <input class='form-control' id='razon_social' name='razon_social' type='text' placeholder="Razon social"></input>
          </div>
        </div>

         <div class='form-group'>
            <label class='control-label col-md-2 col-md-offset-2' for='direccion'>Dirrecion*</label>
            <div class='col-md-4'>
              <input class='form-control' id='direccion' name='direccion' type='text' placeholder="Direccion"></input>
            </div>
          </div>

          <div class='form-group'>
            <label class='control-label col-md-2 col-md-offset-2' for='telefono'>Telefono</label>
            <div class='col-md-4'>
              <input class='form-control' id='telefono' name='telefono' type='text' placeholder="Telefono"></input>
            </div>
          </div>
          

          <div class='form-group'>
            <label class='control-label col-md-2 col-md-offset-2' for='email'>E-mail</label>
            <div class='col-md-6'>
              <div class='form-group'>
                <div class='col-md-8'>
                  <input class='form-control' id='email' name='email' placeholder='E-mail' type='email'>
                </div>
              </div>
            </div>
          </div>
          
        </form> 
          <div class='form-group'>
            
            <div class='col-md-offset-9 col-md-3'>
              <button class='btn-lg btn-primary' style='float:right' id='guardar' >Guardar</button>
            </div>
          
            <script type="text/javascript" charset="utf-8" async defer>
              
            $("button[id=guardar]").click(function () {
      
              var cuit = $("#cuit").val();
              

            '{% for elemento in farmacia %}'

                 if(cuit=='{{elemento.cuit}}'){

                  alert('Este cuit ya se encuentra registrado- Razon social:{{elemento.razon_social}}');

                 }else if(cuit!='{{elemento.cuit}}'){

                  $("#miForm").submit();

                 }

                 '{% endfor %}'



        


              
            });


           </script>
           
          </div>
        </div>
        
       
      </div>
    </div>
  </div>


<script>

$('#datepicker').datepicker({
  dateFormat: 'dd/mm/yy',
  changeYear: true,
  yearRange: "1900:2100"
  });
$.datepicker.regional[ "es" ]
    
$("#miForm").validate({
  errorClass: "claserror",
    validClass: "clasevalida",
    errorElement: 'erele',
    rules: {
          nombre: {
            required: true,
            lettersonly: true,
        maxlength: "20"
          },
      razon_social: {
            required: true,
            lettersonly: true,
        maxlength: "25"
          },
      especialidad: {
            required: true
          },
      matriculaprovincial: {
            required: true,
        maxlength: "20"
          },
      matriculanacional: {
            required: true,
        maxlength: "20"
          },
          apellido: {
            required: true,
            lettersonly: true,
        maxlength: "20"
          },
          dni: {
            required: true,
            digits: true,
            minlength: "8",
            maxlength: "8"
          },
          cuil: {
            required: true,
            digits: true,
            minlength: "10",
            maxlength: "11"
          },
          nacimiento: {
            required: true,
            date: true
          },
          correo: {
            email: true
          },
          direccion: {
            required: true,
        maxlength: "25"
          },
          telefono: {
            required: true,
            digits: true,
        maxlength: "20"
          },
          celular: {
            digits: true,
        maxlength: "20"
          },
          sexo: {
            required: true
          },
          historiaclinica: {
            required: true,
      maxlength: "20"
          },
          osocial: {
            lettersonly: true,
        maxlength: "20"
          }
    },
  messages: {
    nombre: {
        lettersonly: "Escribe sólo letras"
      },
      apellido: {
        lettersonly: "Escribe sólo letras"      
      },
      osocial: {
        lettersonly: "Escribe sólo letras"      
      },
    razon_social: {
        lettersonly: "Escribe sólo letras"
      }
    },
  highlight: function (element, errorClass, validClass) {
        $(element).parent('.miForm').addClass('error');
        $(element).addClass(errorClass).removeClass(validClass);
        },
    unhighlight: function (element, errorClass, validClass) {
        $(element).parent('.miForm').removeClass('error');
        $(element).addClass(validClass).removeClass(errorClass);
        }
  });
</script>

{% endblock %} 