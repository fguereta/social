{% extends "index.html" %} 
{% block htitle %}<title>Registrar Medicamento</title>{% endblock %} 

 
{% block contenido %} 
    

        
        <div class="form-group">
				<label for="medicamento_1" class="control-label col-md-4  col-md-offset-0">Nombre generico del medicamento(1):<font color="red"> *</font></label> 
					<div class="col-md-4 text-left">
                      <select name="medicamento1" id="medicamento1" class="form-control col-md-1 chosen-select " data-placeholder="Busqueda..." required>             
                          <option value=""></option>
                          
                          {% for elemento in medicamento_enviado %}
                          <option value="{{elemento.id}}" >{{elemento.generico}}</option>
                          {% endfor %}
                      

                      </select>
                                        
                    </div>
                      <a  data-toggle="modal" data-target="#myModal">
          				  <img src="/static/img/icon_addlink.gif" alt="Agregar" height="10" width="10">
        			  </a>
		

				<!-- Modal -->
				<div id="myModal" class="modal fade" role="dialog">
  					<div class="modal-dialog">

   					 	<!-- Modal content-->
    					<div class="modal-content">
      						<div class="modal-header">



        						<button type="button" class="close" data-dismiss="modal">&times;</button>
        						<h4 class="modal-title">Registrar nuevo medicamento</h4>
      						</div>
      				
      						<div class="modal-body">
        						
        						
        
        						<div class="form-group">
									<br>
				

									<label for="paciente" class="control-label  col-md-4 col-md-offset-0">Nombre Generico:</label> 
					
									<div class="col-md-7 col-md-offset-0">
						
										<input class="form-control" id="generico" name="generico" type="text" value="" placeholder="Escriba aqui..." />
						
									</div>

								</div>
            
        						
      						
							</div>
      				
      						<div class="modal-footer">
        						<button type="button" class="btn btn-primary" id='guardar' data-dismiss="modal">Guardar</button>
      						</div>
    					</div>

  					</div>
				</div>


        <div id='datos'>

        </div>
   
       

 
<script  type="text/javascript" charset="utf-8" async defer>
   


  
 	
   $("button[id=guardar]").click(function () {
   		
   		
   		var generico=$('#generico').val();
   		
   		$.ajax({

   			
   			url: '/aplicacion/registrarmedicamento/',
   			
   			type: 'POST',
   			data: {'generico':generico,},

   			success: function (datos) {
       			
   				
   				$("#medicamento1").append("<option value="+datos.id+" selected='selected'>"+datos.generico+"</option>");

       				
    		}


   					

   		});

   		

 		
  

 });
 	
   

</script>
 

{% endblock %} 